{% extends "base.html" %} {% set components_path_value = "" %} {% block css_path
%}{% endblock %} {% block components_path %}{% endblock %} {% block
additional_css %}
<link rel="stylesheet" href="styles.css">
{% endblock %} {% block body %}
<main style="margin-top: 20vh">
  <h1><cross-stream-title></cross-stream-title></h1>
  <p class="tagline">
    a local-first <a href="#what-is-event-streaming-store"
    >event streaming store</a> for hackers & tinkerers
  </p>

  <div class="cta-buttons">
    <a
      href="https://cablehead.github.io/xs/getting-started/installation/"
      class="cta-button primary"
    >Get Started</a>
    <a
      href="https://cablehead.github.io/xs/"
      class="cta-button secondary"
    >Documentation</a>
    <a
      href="https://github.com/cablehead/xs"
      class="cta-button secondary"
    >GitHub</a>

    <release-badge
      version="v0.6.1"
      release-date="2025-08-27T19:44:09Z"
      release-url="https://github.com/cablehead/xs/releases/tag/v0.6.1"
    >
    </release-badge>
  </div>

  <!-- Demo Section: Query + Input/Store -->
  <div class="demo-section">
    <div class="input-store-row">
      <!-- Input commands showing executed commands -->
      <div class="console">
        <terminal-panel>
          <terminal-line
            prompt="$"
            command='"buy groceries"'
            pipe="|"
            topic=".append goal"
          ></terminal-line>
          <terminal-line
            prompt="$"
            command='"quick note about meeting"'
            pipe="|"
            topic=".append notes"
          ></terminal-line>
          <terminal-line
            prompt="$"
            command='"submit TPS report"'
            pipe="|"
            topic=".append notes"
          ></terminal-line>
          <terminal-line
            prompt="$"
            command='"learn cross.stream"'
            pipe="|"
            topic=".append goal"
          ></terminal-line>
          <terminal-line
            prompt="$"
            command='"review project docs"'
            pipe="|"
            topic=".append notes"
          ></terminal-line>
        </terminal-panel>
      </div>

      <!-- Store with event bubbles -->
      <div class="store">
        <terminal-panel>
          <terminal-line
            prompt="$"
            command="xs serve (xs-addr)"
          ></terminal-line>
          <div
            class="embedded-component"
            data-variant="store"
            id="events-container"
          >
            <event-bubble
              type="goal"
              content="buy groceries"
              event-id="03d4q1o70y6ek0ig8hwy9q00n"
              frame-id="03egou0geu62jz78r2smufms2"
            >
            </event-bubble>
            <event-bubble
              type="notes"
              content="quick note about meeting"
              event-id="03d4q1qhbiv09ovtuhokw5yxv"
              frame-id="03ehpx4n8q5bvz92k3wtnlem7"
            >
            </event-bubble>
            <event-bubble
              type="notes"
              content="submit TPS report"
              event-id="03d4qbrxizqgav09m7hicksb0"
              frame-id="03ejkr9z2m8xwv45n7qstpkm9"
            >
            </event-bubble>
            <event-bubble
              type="goal"
              content="learn cross.stream"
              event-id="03d4qic9vqkve1krajjtlbavd"
              frame-id="03elmb5w7p3qxt68s9vuwron2"
            >
            </event-bubble>
            <event-bubble
              type="notes"
              content="review project docs"
              event-id="03d4qjwnhwudlfyg1ygemmt7b"
              frame-id="03enmc8v4r6zyu79t1xvwspn4"
            >
            </event-bubble>
          </div>
        </terminal-panel>
      </div>
    </div>

    <!-- Query Section -->
    <div class="query-section">
      <terminal-panel
        id="query-terminal"
        title="Query the Event Store"
      >
        <div
          style="display: flex; flex-direction: column; gap: 0.5em"
          id="query-output"
        >
        </div>
      </terminal-panel>
    </div>
  </div>

  <!-- What's an event streaming store section -->
  <section id="what-is-event-streaming-store">
    <h2>What's an event streaming store?</h2>
    <p>
      If you think of an "event" like a frame in a movie—a small package on a
      timeline—an event streaming store is a <a
        href="https://cablehead.github.io/xs/reference/architecture/"
      >database</a> designed to record these frames in strict order,
      append-only, so they can be replayed or reacted to later.
    </p>
    <p>
      For <a
        href="https://github.com/cablehead/xs/tree/main/examples/discord-bot"
      >example</a>, you might append a frame every time a message is posted in a
      specific Discord channel. You can then <a
        href="https://cablehead.github.io/xs/getting-started/first-stream/#cat-and-cas-commands"
      ><code>.cat</code></a> the stream to review all captured messages, and—if
      you're in a <a href="https://www.nushell.sh/">Nushell</a> session—use
      pipelines to filter, aggregate, or process them with a CLI tool.
    </p>
  </section>

  <!-- Core Ideas Section -->
  <div class="features-grid">
    <feature-card
      type="event-store"
      card-title="Event Store"
      description="Append-only stream with content-addressable storage (CAS). Separate metadata from content for speed."
    ></feature-card>
    <feature-card
      type="generators"
      card-title="Generators"
      description="Continuously pull data from files, APIs, websockets, serial devices, or sensors."
    ></feature-card>
    <feature-card
      type="handlers"
      card-title="Handlers"
      description="React to incoming frames with stateful processors—transform, trigger, fan-out."
    ></feature-card>
    <feature-card
      type="commands"
      card-title="Commands"
      description="On-demand, stateless ops. Perfect for RPC-style calls or streaming data back to the caller."
    ></feature-card>
    <feature-card
      type="local-first"
      card-title="Local-First"
      description="Single binary, file-based store, Unix socket API. No cloud, works offline."
    ></feature-card>
    <feature-card
      type="nushell"
      card-title="Nushell Integration"
      description="Write handlers and generators in Nushell with strong typing and structured pipelines."
    ></feature-card>
  </div>

  <div class="cta-buttons">
    <a
      href="https://cablehead.github.io/xs/getting-started/installation/"
      class="cta-button primary"
    >Get Started</a>
    <a
      href="https://cablehead.github.io/xs/"
      class="cta-button secondary"
    >Documentation</a>
    <a
      href="https://github.com/cablehead/xs"
      class="cta-button secondary"
    >GitHub</a>
  </div>
</main>

<!-- Footer -->
<footer class="footer">
  <div class="footer-links">
    <a href="https://github.com/cablehead/xs">GitHub</a>
    <a href="https://cablehead.github.io/xs/">Docs</a>
    <a href="https://discord.com/invite/YNbScHBHrh">Discord</a>
    <a href="https://www.nushell.sh/">Nushell</a>
  </div>
</footer>

<script>
  // Events are read from event-bubble elements
  function getEvents() {
    return Array.from(document.querySelectorAll("event-bubble"))
      .map((bubble) => ({
        topic: bubble.type,
        content: bubble.content,
      }));
  }

  let activeQuery = null;

  document.addEventListener("DOMContentLoaded", function () {
    // Set up terminal actions via JavaScript
    const queryTerminal = document.getElementById("query-terminal");
    queryTerminal.actions = [
      { id: "notes", title: "Get all notes", selected: true },
      { id: "goal", title: "Get current goal" },
    ];

    // Handle action clicks from terminal panel
    queryTerminal.addEventListener("action-click", function (e) {
      const { actionId } = e.detail;
      executeQuery(actionId);
    });

    // Set default query to "Get all notes"
    executeQuery("notes");
  });

  function executeQuery(type) {
    // Reset all event highlighting
    document.querySelectorAll("event-bubble").forEach((bubble) => {
      bubble.style.opacity = "1";
      bubble.style.transform = "scale(1)";
    });

    activeQuery = type;

    // Show results and highlight relevant events
    showQueryResults(type);
    highlightMatchingEvents(type);
  }

  function showQueryResults(type) {
    const queryOutput = document.getElementById("query-output");
    let output = "";

    if (type === "notes") {
      output = `<div class="terminal-line">
          <span class="comment"># Filter events to show only notes entries with their content</span>
        </div>
        <div class="terminal-line">
          <span class="prompt">$</span>
          <span class="command">.cat | where topic == "notes" | insert content { .cas $in.hash }</span>
        </div>
        <pre class="terminal-output" data-variant="table">┌───┬───────┬─────────────────────────────────────────┐
│ # │ topic │                content                  │
├───┼───────┼─────────────────────────────────────────┤
│ 0 │ notes │ quick note about meeting                │
│ 1 │ notes │ submit TPS report                       │
│ 2 │ notes │ review project docs                     │
└───┴───────┴─────────────────────────────────────────┘</pre>`;
    } else if (type === "goal") {
      output = `<div class="terminal-line">
          <span class="comment"># Get the most recent goal and display its content</span>
        </div>
        <div class="terminal-line">
          <span class="prompt">$</span>
          <span class="command">.head goal | .cas</span>
        </div>
        <pre class="terminal-output">learn cross.stream</pre>`;
    }

    queryOutput.innerHTML = output;
  }

  function highlightMatchingEvents(type) {
    document.querySelectorAll("event-bubble").forEach((bubble) => {
      bubble.style.opacity = "0.3";
      // bubble.style.transform = "scale(0.95)";
    });

    if (type === "notes") {
      // Highlight all notes events
      document.querySelectorAll("event-bubble[type='notes']")
        .forEach(
          (bubble) => {
            bubble.style.opacity = "1";
            bubble.style.transform = "scale(1)";
          },
        );
    } else if (type === "goal") {
      // Highlight only the latest goal event
      const goalBubbles = document.querySelectorAll(
        "event-bubble[type='goal']",
      );
      if (goalBubbles.length > 0) {
        const latestGoal = goalBubbles[goalBubbles.length - 1];
        latestGoal.style.opacity = "1";
        latestGoal.style.transform = "scale(1)";
      }
    }

    // Keep highlighting while query is active
  }
</script>
{% endblock %}
